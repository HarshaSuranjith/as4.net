<?xml version="1.0"?>
<PMode 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns="eu:edelivery:as4:pmode">
  <Id>c3-pull-pmode</Id>
  <Mep>OneWay</Mep>
  <MepBinding>Pull</MepBinding>
  <PullConfiguration>
    <Mpc>http://docs.oasis-open.org/ebxml-msg/ebms/v3.0/ns/core/200704/defaultMPC/UKGATEWAY</Mpc>
    <Protocol>
      <Url>https://eessidev09.eessi.be/EESSI/BusinessMessaging/v0.0/Inbox/Service.svc</Url>
    </Protocol>
    <TlsConfiguration>
      <IsEnabled>true</IsEnabled>
      <TlsVersion>Tls12</TlsVersion>
      <ClientCertificateReference>
        <ClientCertificateFindType>InstitutionUK.westeurope.cloudapp.azure.com_TLS_int</ClientCertificateFindType>
        <ClientCertificateFindValue>FindByFriendlyName</ClientCertificateFindValue>
      </ClientCertificateReference>
    </TlsConfiguration>
  </PullConfiguration>
   <Security>
    <Signing>
      <IsEnabled>true</IsEnabled>
      <KeyReferenceMethod>BSTReference</KeyReferenceMethod>
      <PrivateKeyFindValue>InstitutionUK.westeurope.cloudapp.azure.com_ebMS_sig</PrivateKeyFindValue>
      <PrivateKeyFindType>FindByFriendlyName</PrivateKeyFindType>
      <Algorithm>http://www.w3.org/2001/04/xmldsig-more#rsa-sha256</Algorithm>
      <HashFunction>http://www.w3.org/2001/04/xmlenc#sha256</HashFunction>
    </Signing>
  </Security>
  <MessagePackaging>
    <PartyInfo>
      <FromParty>
        <PartyIds>
          <PartyId>
            <Id>UK:UK010</Id>
            <Type>urn:eu:europa:ec:dgempl:eessi:ir</Type>
          </PartyId>
        </PartyIds>
        <Role>urn:eu:europa:ec:dgempl:eessi:ir:institution</Role>
      </FromParty>
      <ToParty>
        <PartyIds>
          <PartyId>
            <Id>UK:UK001</Id>
            <Type>urn:eu:europa:ec:dgempl:eessi:ir</Type>
          </PartyId>
        </PartyIds>
        <Role>urn:eu:europa:ec:dgempl:eessi:ir:institution</Role>
      </PartyInfo>
      <CollaborationInfo>
        <Action>Send</Action>
        <Service>
          <Type>urn:eu:europa:ec:dgempl:eessi</Type>
          <Value>BusinessMessaging</Value>
        </Service>
      </CollaborationInfo>
    </MessagePackaging>
    <ReceiptHandling>
    <NotifyMessageProducer>true</NotifyMessageProducer>
    <NotifyMethod>
      <Type>FILE</Type>
      <Parameters>
        <Parameter name="location" value=".\messages\receipts\" />
      </Parameters>
    </NotifyMethod>
  </ReceiptHandling>
  </PMode>